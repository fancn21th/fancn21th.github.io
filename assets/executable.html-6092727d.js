import{_ as o,r as i,o as d,c,a as e,b as s,d as l,e as a}from"./app-e3dbf12f.js";const t={},p=a(`<h1 id="å¯æ‰§è¡Œæ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#å¯æ‰§è¡Œæ–‡ä»¶" aria-hidden="true">#</a> å¯æ‰§è¡Œæ–‡ä»¶</h1><h2 id="åˆ›å»ºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶" aria-hidden="true">#</a> åˆ›å»ºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶</h2><div class="custom-container tip"><p class="custom-container-title">æç¤º</p><p><code>nodejs</code> å·²ç»å®‰è£…åœ¨ç›®æ ‡ æœºå™¨æ“ä½œç³»ç»Ÿå†…</p></div><ul><li><p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">touch</span> hello
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>åœ¨æ–‡ä»¶é‡Œ æ‰“å° <code>hello</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>è®©æ–‡ä»¶å¯æ‰§è¡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">chmod</span> +x hello
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>ç”¨ <code>node</code> æ‰§è¡Œæ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">node</span> hello
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç”¨ <code>node</code> æ‰§è¡Œä¸å¤Ÿ cool</p></li><li><p>å¯æ‰§è¡Œæ–‡ä»¶</p><p>å°†ä¸‹é¢çš„æ–‡æœ¬æ”¾åˆ°æ–‡ä»¶å¤´éƒ¨ï¼Œ å®ƒå«åš <a href="Shebang" title="Unix">Shebang</a></p><ul><li>zsh shell</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token hashbang comment">#!node</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>normal shell</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token hashbang comment">#!/usr/bin/env node</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ‰§è¡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./hello
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¿…é¡»å¸¦ä¸Šæ‰§è¡Œè·¯å¾„ä¸å¤Ÿ cool</p></li><li><p>æ³¨å†Œè·¯å¾„</p><p>å°† <code>hello</code> æ–‡ä»¶è·¯å¾„æ³¨å†Œåˆ° <code>path</code></p><ul><li><p>zsh</p><p>å°†æ–‡ä»¶è·¯å¾„åŠ å…¥åˆ° <code>~/.zshrc</code> æ–‡ä»¶ä¸­</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">path</span><span class="token operator">+=</span>pwd <span class="token comment"># pwd ä»£è¡¨ hello çš„è·¯å¾„</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>é‡æ–°åŠ è½½ <code>.zshrc</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">source</span> ~/.zshrc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æˆ–è€…</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">.</span> ~/.zshrc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><p>ç°åœ¨å¯ä»¥åˆ°ä»»ä½•ç›®å½•ä¸‹æ‰§è¡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>hello
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ğŸ†’</p></li></ul><h2 id="å¯æ‰§è¡Œæ–‡ä»¶-åŒ…å«ä¾èµ–åŒ…" tabindex="-1"><a class="header-anchor" href="#å¯æ‰§è¡Œæ–‡ä»¶-åŒ…å«ä¾èµ–åŒ…" aria-hidden="true">#</a> å¯æ‰§è¡Œæ–‡ä»¶ åŒ…å«ä¾èµ–åŒ…</h2>`,5),r=a(`<p>æ“ä½œ</p><p>å¦‚æœæˆ‘ä»¬æƒ³åœ¨ æ–‡ä»¶é‡Œé¢ è°ƒç”¨å…¶ä»– <code>Node</code> æ¨¡å—</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> fs <span class="token keyword">from</span> <span class="token string">&quot;fs&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>é¦–å…ˆéœ€è¦ è®©é¡¹ç›®æ”¯æŒ <code>ESM</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> init <span class="token parameter variable">-y</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ›´æ–° <code>package.json</code> æ”¯æŒ <code>import</code> è¯­æ³•</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ä¾ç„¶æ‰§è¡Œä¼šæŠ¥é”™</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> i esm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨ <code>hello</code> æ–‡ä»¶å¤´éƒ¨ <code>shebang</code> å¢åŠ ä¸€ç‚¹ <code>trick</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token hashbang comment">#!/usr/bin/env node -r esm</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å—¯ï¼Œ ç°åœ¨å¯ä»¥åœ¨ å½“å‰ç›®å½•ä¸‹æ‰§è¡Œ <code>hello</code></p><p>ç­‰ç­‰ï¼Œ å¦‚æœ æˆ‘ä»¬æ¢ä¸€ä¸ªä½ç½®æ‰§è¡Œ <code>hello</code> è¿˜æ˜¯ä¼šæŠ¥å‘Š <code>Cannot find module &#39;esm&#39;</code></p><p>é‚£ä¹ˆæˆ‘ä»¬éœ€è¦ ç»§ç»­æ›´æ–° <code>shebang</code>ï¼Œ å¢åŠ  <code>NODE_PATH</code> çš„æŒ‡å®š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token hashbang comment">#!/usr/bin/env -S NODE_PATH=[pwd]/node_modules node -r esm -r globals</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç°åœ¨ä½ å¯ä»¥åœ¨ä»»ä½•ç›®å½•ä¸‹æ‰§è¡Œ <code>hello</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~
hello
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿˜æœ‰ä¸€äº›å°é—®é¢˜ Â  å½“å‰ ç›®å½•ä¸‹ä¼šç”Ÿæˆä¸€ä¸ª <code>node_modules</code> æ–‡ä»¶å¤¹ è¿™æ˜¯ <code>cache</code> æ–‡ä»¶</p>`,18),u={href:"https://www.npmjs.com/package/esm",target:"_blank",rel:"noopener noreferrer"},v=a(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token hashbang comment">#!/usr/bin/env -S NODE_PATH=[pwd]/node_modules ESM_OPTIONS=&#39;{mode:&quot;auto&quot;,cache:0}&#39; node -r esm -r globals</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æˆ‘ä»¬çœ‹çœ‹ <code>esm</code> çš„ <code>issues</code> æˆ–è€… <code>tests</code> é‡Œé¢æ˜¯ä¸æ˜¯æœ‰æ–¹æ¡ˆ</p>`,2),h={href:"https://github.com/standard-things/esm/blob/master/test/cache-tests.js",target:"_blank",rel:"noopener noreferrer"},m=e("p",null,"How ğŸ†’ is that",-1),b=e("p",null,"å›é¡¾ä¸€ä¸‹",-1),g=e("p",null,[e("code",null,"zsh"),s(" æ‰§è¡Œ äº† "),e("code",null,"hello"),s(" æ–‡ä»¶ï¼Œ å®ƒé€šè¿‡æ–‡ä»¶å¤´éƒ¨ "),e("code",null,"shebang"),s(" çŸ¥é“ç”¨ "),e("code",null,"node"),s(" æ¥æ‰§è¡Œ æ–‡ä»¶ï¼Œ æ­¤å¤–å¹¶ä¸”å¢åŠ äº† ä¸€äº›åˆ—çš„ flags")],-1),k=e("li",null,[e("code",null,"-S NODE_PATH=..."),e("ul",null,[e("li",null,"æŒ‡å®š node path ä»è€Œæ‰¾åˆ°ä¾èµ–åŒ…å®‰è£…çš„ä½ç½®")])],-1),_=e("li",null,[e("code",null,"-S ESM_OPTIONS=..."),e("ul",null,[e("li",null,"å‘½ä»¤æ‰§è¡Œå å»æ‰åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆçš„ç¼“å­˜æ–‡ä»¶")])],-1),x=e("code",null,"-r esm",-1),q={href:"https://nodejs.org/docs/latest-v14.x/api/cli.html",target:"_blank",rel:"noopener noreferrer"},f=e("ul",null,[e("li",null,"Preload the specified module at startup.")],-1),j=e("li",null,[e("code",null,"-r globals"),e("ul",null,[e("li",null,"åŒä¸Š")])],-1),S=a(`<h2 id="å¯æ‰§è¡Œæ–‡ä»¶-æ‰©å±•" tabindex="-1"><a class="header-anchor" href="#å¯æ‰§è¡Œæ–‡ä»¶-æ‰©å±•" aria-hidden="true">#</a> å¯æ‰§è¡Œæ–‡ä»¶ æ‰©å±•</h2><ul><li><p>top level <code>await</code></p><p>é»˜è®¤æƒ…å†µä¸‹ <code>await</code> ä¸å¯ä»¥åœ¨ å‡½æ•°å¤– å£°æ˜</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;esm&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.2.25&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;esm&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;await&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>global utilities</p><p>å¢åŠ ä¸€äº› å…¨å±€å¯¹è±¡ æ–¹ä¾¿ ç¼–å†™ <code>cli</code> è„šæœ¬</p></li></ul>`,2);function w(y,E){const n=i("ExternalLinkIcon");return d(),c("div",null,[p,e("ul",null,[e("li",null,[r,e("p",null,[e("a",u,[s("ESM_DISABLE_CACHE"),l(n)]),s(" flag çœ‹èµ·æ¥å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜")]),v,e("p",null,[e("a",h,[s("cache-tests"),l(n)])]),m]),e("li",null,[b,g,e("ul",null,[k,_,e("li",null,[x,e("ul",null,[e("li",null,[e("a",q,[s("--require module"),l(n)]),f])])]),j])])]),S])}const O=o(t,[["render",w],["__file","executable.html.vue"]]);export{O as default};
